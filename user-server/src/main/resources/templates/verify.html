<!DOCTYPE html>
<html lang="en">
<head xmlns:th="http://www.w3.org/1999/xhtml">
    <meta charset="UTF-8">
    <title>Email Verification</title>
    <!-- javascript -->
    <script src="https://code.jquery.com/jquery-3.2.1.js" integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

    <script th:inline="javascript">
        const key = [[${key}]];
        function request_verify(){
          $.ajax({
            type : "POST",
            url : "/user-server/user/verify/" + key,
            headers : {
                "Content-Type" : "application/json",
                "X-HTTP-Method-Override" : "POST"
            },
            dataType : "json",
            success : function(result){
                console.log("result : ", result);
                if(result.response == "success"){
                    alert(result.message);
                    self.location = "/";
                }else{
                    alert(result.message);
                    self.location = "/verify";
                }
            }
            });
        }

        request_verify();
    </script>
</head>
<body>

</body>
</html>